## Plan: Quarkus + Vaadin AI RPG Game with LangChain4j

Create a complete text-based fantasy RPG application using Quarkus backend, Vaadin server-side UI, and LangChain4j agents. The game features dynamic AI-driven storytelling, NPC interactions, fully autonomous team members, and simple stat-based combat where all narrative and behaviors are generated by specialized AI agents using interchangeable LLM providers (OpenAI/Ollama). NPC memories are maintained in-memory with future JOOQ persistence support.

### Steps

1. **Bootstrap project structure** - Generate Quarkus Maven project (Java 21) with dependencies: vaadin-quarkus-extension, langchain4j-quarkus, langchain4j-openai, langchain4j-ollama; create packages (ui, domain, agents, game, services, config)

2. **Implement domain model** - Create Hero, NPC, TeamMember, Quest, CombatEncounter entities with RPG stats; build GameState service managing world state; implement in-memory ConversationMemoryStore for NPC chat histories

3. **Configure LangChain4j agent infrastructure** - Build AIProviderFactory with OpenAI/Ollama switching via application.properties; create AgentService with specialized agents: WorldNarratorAgent, NPCAgentFactory (instances per NPC), CombatNarratorAgent, CompanionAgentFactory; each agent uses ChatMemory for context retention

4. **Implement game engine services** - Build WorldService (story progression, location management), NPCService (agenda-driven behavior, quest generation), TeamService (recruitment, autonomous companion actions), CombatService (stat-based resolution with AI narration, autonomous team combat actions)

5. **Develop Vaadin UI components** - Create GameView with vertical layout: story/dialogue TextArea (read-only), player input TextField with submit button, right-side panels for hero stats, team roster with stats/status, active quests list; wire to GameEngine with async updates

6. **Add configuration and startup** - Create application.properties templates for openai.api.key and ollama.base.url; implement game initialization service selecting main goal at startup; add README with build instructions, provider configuration, example gameplay commands

### Game Design Decisions

1. **Initial game goals** - Random selection at game start from predefined quests: "Slay the Dragon of Mount Doom", "Rescue Princess Elena", "Stop the Necromancer's Ritual", "Find the Lost Artifact"

2. **Team size limits** - Maximum 4 companions to keep combat manageable and conversations focused

3. **Stat system (D&D-inspired)**:
   - Core attributes: Strength, Intelligence, Agility, Constitution, Charisma (scale 3-18)
   - Derived stats: Health = Constitution × 10, Mana = Intelligence × 5
   - Combat formulas:
     - Melee damage: Strength modifier + weapon bonus + 1d6
     - Magic damage: Intelligence modifier + spell power + 1d8
     - Defense: 10 + Agility modifier + armor bonus
     - Hit chance: d20 + attacker's modifier vs defender's defense
     - Initiative: d20 + Agility modifier
